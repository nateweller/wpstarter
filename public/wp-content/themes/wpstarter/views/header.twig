{% macro menuItemClasses( item, post) %}
    menu-item 
    {{ item.object_id == post.id ? 'current-page' }}
    {{ item.subMenu ? 'menu-item-has-children' }}
    {% for subItem in item.subMenu %}
        {{ subItem.object_id == post.id ? 'current-menu-parent' }}
    {% endfor %}
    {{ item.classes|join }}
{% endmacro %}

{% macro menuItem( item, post ) %}
    <li class="{{ _self.menuItemClasses( item, post ) }}">
        <a href="{{ item.url }}">{{ item.title }}</a>
        {% if item.subMenu %}
            <ul class="sub-menu">
                {% for menuItem in item.subMenu %}
                    {{ _self.menuItem( menuItem, post ) }}
                {% endfor %}
            </ul>
        {% endif %}
    </li>
{% endmacro %}

<header>
    <h1>{{ site.title }}</h1>
    <p>{{ site.description }}</p>
    {% if menu|length > 0 %}
        <ul class="nav">
            {% for menuItem in menu %}
                {{ _self.menuItem( menuItem, post ) }}
            {% endfor %}
        </ul>
    {% endif %}
</header>